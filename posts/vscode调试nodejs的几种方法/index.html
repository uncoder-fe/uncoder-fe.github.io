<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Vscode调试nodejs的几种方法 | 不三之选</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="这里说明通过 vscode 调试 nodejs 程序的几种方式，本身使用的还是 调用nodejs 自带的调试工具。"><meta name=generator content="Hugo 0.111.3"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Vscode调试nodejs的几种方法"><meta property="og:description" content="这里说明通过 vscode 调试 nodejs 程序的几种方式，本身使用的还是 调用nodejs 自带的调试工具。"><meta property="og:type" content="article"><meta property="og:url" content="/posts/vscode%E8%B0%83%E8%AF%95nodejs%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-01-23T20:50:50+08:00"><meta property="article:modified_time" content="2018-01-23T20:50:50+08:00"><meta itemprop=name content="Vscode调试nodejs的几种方法"><meta itemprop=description content="这里说明通过 vscode 调试 nodejs 程序的几种方式，本身使用的还是 调用nodejs 自带的调试工具。"><meta itemprop=datePublished content="2018-01-23T20:50:50+08:00"><meta itemprop=dateModified content="2018-01-23T20:50:50+08:00"><meta itemprop=wordCount content="113"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Vscode调试nodejs的几种方法"><meta name=twitter:description content="这里说明通过 vscode 调试 nodejs 程序的几种方式，本身使用的还是 调用nodejs 自带的调试工具。"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-dark-gray><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">不三之选</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/posts/ title="Posts page">Posts</a></li></ul><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Vscode调试nodejs的几种方法</h1><p class=tracked>By <strong>uncoder</strong></p><time class="f6 mv4 dib tracked" datetime=2018-01-23T20:50:50+08:00>January 23, 2018</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>这里说明通过 vscode 调试 nodejs 程序的几种方式，本身使用的还是 调用nodejs 自带的调试<a href=https://code.visualstudio.com/docs/nodejs/nodejs-debugging>工具</a>。</p><p><a href=https://nodejs.org/en/docs/inspector/>文档入口</a>。这里说的是主线程调试，通过 spawn 开启的子进程暂时没找到方法。而 fork 可以的。</p><h1 id=第一种配置>第一种配置</h1><p>最原始的，配置程序路径，启动条件，启动参数，端口号</p><p>nodejs: 启动程序</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>//launch.json
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request&#34;</span>: <span style=color:#e6db74>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Launch Program&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;program&#34;</span>: <span style=color:#e6db74>&#34;${workspaceFolder}/build/bin/test-scripts.js&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;runtimeArgs&#34;</span>: [<span style=color:#e6db74>&#34;--inspect-brk=9229&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;args&#34;</span>: [<span style=color:#e6db74>&#34;init&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;port&#34;</span>: <span style=color:#ae81ff>9229</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=第二种配置>第二种配置</h1><p>nodejs: npm 启动</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>//package.json
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;taskr&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;build&#34;</span>: <span style=color:#e6db74>&#34;taskr build&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;debug&#34;</span>: <span style=color:#e6db74>&#34;node --inspect-brk=9229 ./build/scripts/ax-rn-scripts.js init&#34;</span>
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//launch.json
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;request&#34;</span>: <span style=color:#e6db74>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Launch via NPM&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;runtimeExecutable&#34;</span>: <span style=color:#e6db74>&#34;npm&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;runtimeArgs&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;run&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;debug&#34;</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;port&#34;</span>: <span style=color:#ae81ff>9229</span>
</span></span><span style=display:flex><span>}<span style=color:#960050;background-color:#1e0010>,</span>
</span></span></code></pre></div><h1 id=第三种配置>第三种配置</h1><p>这个方法和第二种类似，只是程序是从 shell 启动，然后在 vscode 中通过进程 attach 进去。</p><p>nodejs: 附加到进程</p><p>方法：</p><ol><li>命令行启动 nodejs 程序</li><li>从 vscode 的 debugg 中选择<code>Attach by Process ID</code></li><li>选择已启动程序的进程即可(可以通过路径和端口号比对)</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>//launch.json
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request&#34;</span>: <span style=color:#e6db74>&#34;attach&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Attach by Process ID&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;processId&#34;</span>: <span style=color:#e6db74>&#34;${command:PickProcess}&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=备注>备注</h1><p>使用<code>babel-node</code>调试，新增</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#e6db74>&#34;runtimeExecutable&#34;</span><span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#e6db74>&#34;${workspaceRoot}/node_modules/babel-cli/bin/babel-node.js&#34;</span>
</span></span></code></pre></div><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-dark-gray bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=/>&copy; 不三之选 2023</a><div><div class=ananke-socials></div></div></div></footer></body></html>